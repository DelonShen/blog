---
title: Codeforces Round 321 (Div. 2) C - Kefa and Park
---
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Delon Shen" />
  <title>321c.tex</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><a href="http://codeforces.com/problemset/problem/580/C">Link to problem</a><br />
<strong>Solution</strong><br />
For this problem, we traverse down with a DFS starting from the root and keep track of the number of consecutive cats we’ve seen. If the number of consecutive cats exceeds <span class="math inline">\(M\)</span>, we don’t continue to DFS from that node. If we reach a node that is a leaf (that is to say it only has one edge coming from it and it’s not the root) we’ve found one restaurant for our boy to eat at.<br />
<strong>Code</strong></p>
<pre><code>#include &lt;bits/stdc++.h&gt;
typedef int OwO; typedef double UwU;
#define int long long
#define double long double

using namespace std;

vector&lt;int&gt; visited;
vector&lt;int&gt; cats;
int N,M;
int oup = 0;

void dfs(vector&lt;vector&lt;int&gt;&gt;&amp; graph, int cat_count, int curr){
  if(visited[curr])
    return;
  visited[curr]=1;

  if(cats[curr])
    cat_count++;
  else
    cat_count = 0;

  if(cat_count &gt; M)
    return;

  if(graph[curr].size()==1 &amp;&amp; curr != 0){
    oup++;
  }

  for(auto e:graph[curr]){
    dfs(graph, cat_count, e);
  }

  return;
}

OwO main(){
  ios::sync_with_stdio(false);
  cin.tie(NULL);
  cin &gt;&gt; N &gt;&gt; M;
  cats=vector&lt;int&gt;(N,0);
  for(int x = 0; x&lt;N; x++)
    cin &gt;&gt; cats[x];
  vector&lt;vector&lt;int&gt;&gt; graph(N, vector&lt;int&gt;());
  for(int x = 0; x&lt;N-1; x++){
    int a,b;
    cin &gt;&gt; a &gt;&gt; b;
    a--;
    b--;
    graph[a].push_back(b);
    graph[b].push_back(a);
  }
  visited = vector&lt;int&gt;(N, 0);
  dfs(graph, 0, 0);
  cout &lt;&lt; oup &lt;&lt; endl;

  return 0;
}</code></pre>
<p><em>Think you found a mistake? You probably did. Let me know at <a href="mailto:hi@delonshen.com">hi@delonshen.com</a> if you want.</em></p>
</body>
</html>
